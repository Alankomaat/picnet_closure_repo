var SwipeView=function(l,h){function m(a){if(""===e)return a;a=a.charAt(0).toUpperCase()+a.substr(1);return e+a}var f=h.createElement("div").style,e;a:{for(var n=["t","webkitT","MozT","msT","OT"],v,i=0,w=n.length;i<w;i++)if(v=n[i]+"ransform",v in f){e=n[i].substr(0,n[i].length-1);break a}e=!1}var p=e?"-"+e.toLowerCase()+"-":"",x=m("transform"),j=m("transitionDuration"),f=m("perspective")in f,g="ontouchstart"in l;m("transition");var y=f?" translateZ(0)":"",q="onorientationchange"in l?"orientationchange":
"resize",r=g?"touchstart":"mousedown",s=g?"touchmove":"mousemove",t=g?"touchend":"mouseup",z=g?"touchcancel":"mouseup",k;k=!1===e?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"}[e];f=function(a,c){var b,d,u;this.wrapper="string"==typeof a?h.querySelector(a):a;this.options={text:null,numberOfPages:3,snapThreshold:null,hastyPageFlip:!1,loop:!0};for(b in c)this.options[b]=c[b];this.wrapper.style.overflow="hidden";this.wrapper.style.position=
"relative";this.masterPages=[];d=h.createElement("div");d.id="swipeview-slider";d.style.cssText="position:relative;top:0;height:100%;width:100%;"+p+"transition-duration:0;"+p+"transform:translateZ(0);"+p+"transition-timing-function:ease-out";this.wrapper.appendChild(d);this.slider=d;this.refreshSize();for(b=-1;2>b;b++)d=h.createElement("div"),d.id="swipeview-masterpage-"+(b+1),d.style.cssText=p+"transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;left:"+100*b+"%",d.dataset||(d.dataset=
{}),u=-1==b?this.options.numberOfPages-1:b,d.dataset.pageIndex=u,d.dataset.upcomingPageIndex=u,!this.options.loop&&-1==b&&(d.style.visibility="hidden"),this.slider.appendChild(d),this.masterPages.push(d);b=this.masterPages[1].className;this.masterPages[1].className=!b?"swipeview-active":b+" swipeview-active";l.addEventListener(q,this,!1);this.wrapper.addEventListener(r,this,!1);this.wrapper.addEventListener(s,this,!1);this.wrapper.addEventListener(t,this,!1);this.slider.addEventListener(k,this,!1);
"O"==e&&this.slider.addEventListener(k.toLowerCase(),this,!1)};f.prototype={currentMasterPage:1,x:0,page:0,pageIndex:0,customEvents:[],onFlip:function(a){this.wrapper.addEventListener("swipeview-flip",a,!1);this.customEvents.push(["flip",a])},onMoveOut:function(a){this.wrapper.addEventListener("swipeview-moveout",a,!1);this.customEvents.push(["moveout",a])},onMoveIn:function(a){this.wrapper.addEventListener("swipeview-movein",a,!1);this.customEvents.push(["movein",a])},onTouchStart:function(a){this.wrapper.addEventListener("swipeview-touchstart",
a,!1);this.customEvents.push(["touchstart",a])},destroy:function(){for(;this.customEvents.length;)this.wrapper.removeEventListener("swipeview-"+this.customEvents[0][0],this.customEvents[0][1],!1),this.customEvents.shift();l.removeEventListener(q,this,!1);this.wrapper.removeEventListener(r,this,!1);this.wrapper.removeEventListener(s,this,!1);this.wrapper.removeEventListener(t,this,!1);this.slider.removeEventListener(k,this,!1)},refreshSize:function(){this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=
this.wrapper.clientHeight;this.pageWidth=this.wrapperWidth;this.maxX=-this.options.numberOfPages*this.pageWidth+this.wrapperWidth;this.snapThreshold=null===this.options.snapThreshold?Math.round(0.15*this.pageWidth):/%/.test(this.options.snapThreshold)?Math.round(this.pageWidth*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold},updatePageCount:function(a){this.options.numberOfPages=a;this.maxX=-this.options.numberOfPages*this.pageWidth+this.wrapperWidth},goToPage:function(a){var c;
this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,"");for(c=0;3>c;c++)className=this.masterPages[c].className,/(^|\s)swipeview-loading(\s|$)/.test(className)||(this.masterPages[c].className=!className?"swipeview-loading":className+" swipeview-loading");this.pageIndex=this.page=a=0>a?0:a>this.options.numberOfPages-1?this.options.numberOfPages-1:a;this.slider.style[j]="0s";this.__pos(-a*this.pageWidth);this.currentMasterPage=
this.page+1-3*Math.floor((this.page+1)/3);this.masterPages[this.currentMasterPage].className+=" swipeview-active";0===this.currentMasterPage?(this.masterPages[2].style.left=100*this.page-100+"%",this.masterPages[0].style.left=100*this.page+"%",this.masterPages[1].style.left=100*this.page+100+"%",this.masterPages[2].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[0].dataset.upcomingPageIndex=this.page,this.masterPages[1].dataset.upcomingPageIndex=this.page==
this.options.numberOfPages-1?0:this.page+1):1==this.currentMasterPage?(this.masterPages[0].style.left=100*this.page-100+"%",this.masterPages[1].style.left=100*this.page+"%",this.masterPages[2].style.left=100*this.page+100+"%",this.masterPages[0].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[1].dataset.upcomingPageIndex=this.page,this.masterPages[2].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1):(this.masterPages[1].style.left=
100*this.page-100+"%",this.masterPages[2].style.left=100*this.page+"%",this.masterPages[0].style.left=100*this.page+100+"%",this.masterPages[1].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[2].dataset.upcomingPageIndex=this.page,this.masterPages[0].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1);this.__flip()},next:function(){if(this.options.loop||this.x!=this.maxX)this.directionX=-1,this.x-=1,this.__checkPosition()},
prev:function(){if(this.options.loop||0!==this.x)this.directionX=1,this.x+=1,this.__checkPosition()},handleEvent:function(a){switch(a.type){case r:this.__start(a);break;case s:this.__move(a);break;case z:case t:this.__end(a);break;case q:this.__resize();break;case k:case "otransitionend":a.target==this.slider&&!this.options.hastyPageFlip&&this.__flip()}},__pos:function(a){this.x=a;this.slider.style[x]="translate("+a+"px,0)"+y},__resize:function(){this.refreshSize();this.slider.style[j]="0s";this.__pos(-this.page*
this.pageWidth)},__start:function(a){this.initiated||(a=g?a.touches[0]:a,this.initiated=!0,this.thresholdExceeded=this.moved=!1,this.startX=a.pageX,this.startY=a.pageY,this.pointX=a.pageX,this.pointY=a.pageY,this.directionX=this.stepsY=this.stepsX=0,this.directionLocked=!1,this.slider.style[j]="0s",this.__event("touchstart"))},__move:function(a){if(this.initiated){var c=g?a.touches[0]:a,b=c.pageX-this.pointX,d=c.pageY-this.pointY,e=this.x+b,f=Math.abs(c.pageX-this.startX);this.moved=!0;this.pointX=
c.pageX;this.pointY=c.pageY;this.directionX=0<b?1:0>b?-1:0;this.stepsX+=Math.abs(b);this.stepsY+=Math.abs(d);if(!(10>this.stepsX&&10>this.stepsY))if(!this.directionLocked&&this.stepsY>this.stepsX)this.initiated=!1;else{a.preventDefault();this.directionLocked=!0;if(!this.options.loop&&(0<e||e<this.maxX))e=this.x+b/2;!this.thresholdExceeded&&f>=this.snapThreshold?(this.thresholdExceeded=!0,this.__event("moveout")):this.thresholdExceeded&&f<this.snapThreshold&&(this.thresholdExceeded=!1,this.__event("movein"));
this.__pos(e)}}},__end:function(a){if(this.initiated&&(a=Math.abs((g?a.changedTouches[0]:a).pageX-this.startX),this.initiated=!1,this.moved)){if(!this.options.loop&&(0<this.x||this.x<this.maxX))a=0,this.__event("movein");a<this.snapThreshold?(this.slider.style[j]=Math.floor(300*a/this.snapThreshold)+"ms",this.__pos(-this.page*this.pageWidth)):this.__checkPosition()}},__checkPosition:function(){var a,c,b;this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,
"");0<this.directionX?(this.page=-Math.ceil(this.x/this.pageWidth),this.currentMasterPage=this.page+1-3*Math.floor((this.page+1)/3),this.pageIndex=0===this.pageIndex?this.options.numberOfPages-1:this.pageIndex-1,a=this.currentMasterPage-1,a=0>a?2:a,this.masterPages[a].style.left=100*this.page-100+"%",c=this.page-1):(this.page=-Math.floor(this.x/this.pageWidth),this.currentMasterPage=this.page+1-3*Math.floor((this.page+1)/3),this.pageIndex=this.pageIndex==this.options.numberOfPages-1?0:this.pageIndex+
1,a=this.currentMasterPage+1,a=2<a?0:a,this.masterPages[a].style.left=100*this.page+100+"%",c=this.page+1);b=this.masterPages[this.currentMasterPage].className;/(^|\s)swipeview-active(\s|$)/.test(b)||(this.masterPages[this.currentMasterPage].className=!b?"swipeview-active":b+" swipeview-active");b=this.masterPages[a].className;/(^|\s)swipeview-loading(\s|$)/.test(b)||(this.masterPages[a].className=!b?"swipeview-loading":b+" swipeview-loading");c-=Math.floor(c/this.options.numberOfPages)*this.options.numberOfPages;
this.masterPages[a].dataset.upcomingPageIndex=c;newX=-this.page*this.pageWidth;this.slider.style[j]=Math.floor(500*Math.abs(this.x-newX)/this.pageWidth)+"ms";this.options.loop||(this.masterPages[a].style.visibility=0===newX||newX==this.maxX?"hidden":"");this.x==newX?this.__flip():(this.__pos(newX),this.options.hastyPageFlip&&this.__flip())},__flip:function(){this.__event("flip");for(var a=0;3>a;a++)this.masterPages[a].className=this.masterPages[a].className.replace(/(^|\s)swipeview-loading(\s|$)/,
""),this.masterPages[a].dataset.pageIndex=this.masterPages[a].dataset.upcomingPageIndex},__event:function(a){var c=h.createEvent("Event");c.initEvent("swipeview-"+a,!0,!0);this.wrapper.dispatchEvent(c)}};return f}(window,document);