<!doctype html>
<html>
  <head></head>
  <body>
    <script src="http://localhost/shared/closure-library/closure/goog/base.js"></script>
    <script src="../deps.js"></script>
    <script>
goog.require('goog.testing.jsunit');

goog.require('pn.json');

var setUp = function() {};

var testSimpleJSONSerialise = function () {    
  if (typeof (JSON) === 'undefined' || window.navigator.userAgent.indexOf('MSIE') >= 0) return;
  var obj = { stringval:'stringvalue', numberval:10.1, boolval:true, objval :{ str: 'string'}};

  var exp = JSON.stringify(obj);
  var actual = pn.json.serialiseJson(obj);  
  assertEquals(exp, actual);
};

var testDateParsingUsesEpochMillis = function () {      
  if (typeof (JSON) === 'undefined' || window.navigator.userAgent.indexOf('MSIE') >= 0) return;
  var obj = { stringval:'stringvalue', dateval: new Date() };
  
  var actual = pn.json.serialiseJson(obj);  
  
  obj.dateval = obj.dateval.getTime();
  var exp = JSON.stringify(obj);
  assertEquals(exp, actual);
};
    </script>    
  </body>
</html>