<!doctype html>
<html>
  <head></head>
  <body>
    <script src="http://localhost/shared/closure-library/closure/goog/base.js"></script>
    <script src="../deps.js"></script>
    <script>
goog.require('goog.testing.jsunit');
goog.require('pn.seq.Seq');

var setUp = function() {};

var testSimpleSelectMany = function () {		
  var source = pn.seq.Seq.create([ 1, 3, 4, 2, 8, 1 ]); 
  var result = source.selectMany(function(x, i) {   
    return pn.seq.Seq.repeat(x, i);
  }); 
  assertArrayEquals([3, 4, 4, 2, 2, 2, 8, 8, 8, 8, 1, 1, 1, 1, 1], result); 
};

var testMultipleSelectMany = function () {		
  var source = pn.seq.Seq.create([ 1, 3, 4, 2, 8, 1 ]); 
  var result = source.selectMany(function(x, i) {   
    return pn.seq.Seq.repeat(x, i);
  }); 
  assertArrayEquals([3, 4, 4, 2, 2, 2, 8, 8, 8, 8, 1, 1, 1, 1, 1], result); 
  result = source.selectMany(function(x, i) {   
    return pn.seq.Seq.repeat(x, i);
  }); 
  assertArrayEquals([3, 4, 4, 2, 2, 2, 8, 8, 8, 8, 1, 1, 1, 1, 1], result); 
};

var testWithSelector = function  () {		
  var source = pn.seq.Seq.create([ 1, 3, 4, 2, 8, 1 ]); 
  var result = source.selectMany(function(x, i) {     
    return pn.seq.Seq.repeat(x, i);
  }, function(x, i2) {    
    return x + i2;    
  }); 
  assertArrayEquals([3,5,6,5,6,7,14,15,16,17,11,12,13,14,15], result); 
};

var testNullSelectorThrowsError = function() {
  try { 
    var source = pn.seq.Seq.create([ 1, 3, 4, 2, 8, 1 ]); 
    var result = source.selectMany(null); 
    assertFail('Should not allow null selector');
  } catch (ex) {};
};
    </script>    
  </body>
</html>