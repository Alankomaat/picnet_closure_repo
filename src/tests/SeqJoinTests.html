<!doctype html>
<html>
  <head></head>
  <body>
    <script src="http://localhost/shared/closure-library/closure/goog/base.js"></script>
    <script src="../deps.js"></script>
    <script>
goog.require('goog.testing.jsunit');
goog.require('pn.seq.Seq');

var testNullInnerThrowsError = function() {    
  try {
    pn.seq.Seq.create([5, 3, 7]).join(null, 
                         function(o) { return o; }, 
                         function(i) { return i.length; }, 
                         function(o, i) { return o + ':' + i; });                           
    assertFail('inner should not be null');
  } catch (ex) {};
};

var testNullOuterSelectThrowsError = function() {  
  var inner = pn.seq.Seq.create(["bee", "giraffe", "tiger", "badger", "ox", "cat", "dog"]); 

  try {
    pn.seq.Seq.create([5, 3, 7]).join(inner, 
                         null, 
                         function(i) { return i.length; }, 
                         function(o, i) { return o + ':' + i; });                           
    assertFail('outerSelector should not be null');
  } catch (ex) {};
};

var testNullInnerSelectThrowsError = function() {  
  var inner = pn.seq.Seq.create(["bee", "giraffe", "tiger", "badger", "ox", "cat", "dog"]); 

  try {
    pn.seq.Seq.create([5, 3, 7]).join(inner, 
                         function(o) { return o; }, 
                         null, 
                         function(o, i) { return o + ':' + i; });                           
    assertFail('innerSelector should not be null');
  } catch (ex) {};
};

var testNullResultsSelectorThrowsError = function() {  
  var inner = pn.seq.Seq.create(["bee", "giraffe", "tiger", "badger", "ox", "cat", "dog"]); 

  try {
    pn.seq.Seq.create([5, 3, 7]).join(inner, 
                         function(o) { return o; }, 
                         function(i) { return i.length; }, 
                         null);                           
    assertFail('resultsSelector should not be null');
  } catch (ex) {};
};

var testDifferentSourceTypes = function() 
{ 
  var outer = pn.seq.Seq.create([5, 3, 7]); 
  var inner = pn.seq.Seq.create(["bee", "giraffe", "tiger", "badger", "ox", "cat", "dog"]); 

  var query = outer.join(inner, 
                         function(o) { return o; }, 
                         function(i) { return i.length; }, 
                         function(o, i) { return o + ':' + i; });                         
  assertArrayEquals(["5:tiger", "3:bee", "3:cat", "3:dog", "7:giraffe"], query);  
};

var testMultipleJoins = function() 
{ 
  var outer = pn.seq.Seq.create([5, 3, 7]); 
  var inner = pn.seq.Seq.create(["bee", "giraffe", "tiger", "badger", "ox", "cat", "dog"]); 

  var query = outer.join(inner, 
                         function(o) { return o; }, 
                         function(i) { return i.length; }, 
                         function(o, i) { return o + ':' + i; });                         
  assertArrayEquals(["5:tiger", "3:bee", "3:cat", "3:dog", "7:giraffe"], query);  
  query = outer.join(inner, 
                         function(o) { return o; }, 
                         function(i) { return i.length; }, 
                         function(o, i) { return o + ':' + i; });                         
  assertArrayEquals(["5:tiger", "3:bee", "3:cat", "3:dog", "7:giraffe"], query);  
};

    </script>    
  </body>
</html>