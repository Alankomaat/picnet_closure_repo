<!doctype html>
<html>
  <head></head>
  <body>
    <script src="http://localhost/shared/closure-library/closure/goog/base.js"></script>
    <script src="../deps.js"></script>
    <script>
goog.require('goog.testing.jsunit');
goog.require('pn.seq.Seq');

var testFirstWithEmptyThrowsError = function() {
  try {
    new pn.seq.Seq([]).first();
    assertFail('Null sequence should throw an error');
  } catch (ex) {};
};
var testLastWithEmptyThrowsError = function() {
  try {
    new pn.seq.Seq([]).last();
    assertFail('Null sequence should throw an error');
  } catch (ex) {};
};
var testSingleWithEmptyThrowsError = function() {
  try {
    new pn.seq.Seq([]).single();
    assertFail('Null sequence should throw an error');
  } catch (ex) {};
};

var testFirstOrNullWithEmptyReturnsNull = function() {
  assertNull(new pn.seq.Seq([]).firstOrNull());    
};
var testLastOrNullWithEmptyReturnsNull = function() {
  assertNull(new pn.seq.Seq([]).lastOrNull());    
};
var testSingleOrNullWithEmptyReturnsNull = function() {
  assertNull(new pn.seq.Seq([]).singleOrNull());    
};

var testFirstWithSingleElementAndNoPredicateReturnsSingle = function() {
  assertEquals(1, new pn.seq.Seq([1]).first());    
};

var testLastWithSingleElementAndNoPredicateReturnsSingle = function() {
  assertEquals(1, new pn.seq.Seq([1]).last());    
};

var testSingleWithSingleElementAndNoPredicateReturnsSingle = function() {
  assertEquals(1, new pn.seq.Seq([1]).single());    
};

var testMultipleSingles = function() {
  var seq = new pn.seq.Seq([1]);
  assertEquals(1, seq.single());    
  assertEquals(1, seq.single());    
};

var testFirsOrNulltWithSingleElementAndNoPredicateReturnsSingle = function() {
  assertEquals(1, new pn.seq.Seq([1]).firstOrNull());    
};

var testLastOrNullWithSingleElementAndNoPredicateReturnsSingle = function() {
  assertEquals(1, new pn.seq.Seq([1]).lastOrNull());    
};

var testSingleOrNullWithSingleElementAndNoPredicateReturnsSingle = function() {
  assertEquals(1, new pn.seq.Seq([1]).singleOrNull());    
};

var testSingleWithPredicateReturnsSingleMatch = function() {
  assertEquals(3, new pn.seq.Seq([1, 2, 3]).single(function(x) { return x > 2; }));    
};

var testSingleOrNullWithPredicateReturnsSingleMatch = function() {
  assertEquals(3, new pn.seq.Seq([1, 2, 3]).singleOrNull(function(x) { return x > 2; }));    
};

var testFirstWithMultipleElementAndNoPredicateReturnsFirst = function() {
  assertEquals(1, new pn.seq.Seq([1, 2, 3]).first());    
};

var testMultipleFirsts = function() {
  var seq = new pn.seq.Seq([1, 2, 3]);
  assertEquals(1, seq.first());    
  assertEquals(1, seq.first());    
};

var testLastWithMultipleElementAndNoPredicateReturnsLast = function() {
  assertEquals(3, new pn.seq.Seq([1, 2, 3]).last());    
};

var testSingleWithMultipleElementAndNoPredicateThrowsError = function() {
  try { 
    new pn.seq.Seq([1, 2, 3]).single();     
    assertFail('Multiple matched');
  } catch (ex) {};
};

var testFirstWithMultipleElementAndWithPredicateReturnsFirst = function() {
  assertEquals(2, new pn.seq.Seq([1, 2, 3]).first(function(x) { return x > 1; }));     
};

var testLastWithMultipleElementAndWithPredicateReturnsLast = function() {
  assertEquals(3, new pn.seq.Seq([1, 2, 3]).last(function(x) { return x > 1; }));       
};

var testMultipleLasts = function() {
  var seq = new pn.seq.Seq([1, 2, 3]);
  assertEquals(3, seq.last());       
  assertEquals(3, seq.last());       
};

var testSingleWithMultipleElementAndWithPredicateThrowsError = function() {
  try { 
    new pn.seq.Seq([1, 2, 3]).single(function(x) { return x > 1; });     
    assertFail('Multiple matched');
  } catch (ex) {};
};

var testFirstOrNullWithMultipleElementAndWithPredicateReturnsFirst = function() {
  assertEquals(2, new pn.seq.Seq([1, 2, 3]).firstOrNull(function(x) { return x > 1; }));     
};

var testLastOrNullWithMultipleElementAndWithPredicateReturnsLast = function() {
  assertEquals(3, new pn.seq.Seq([1, 2, 3]).lastOrNull(function(x) { return x > 1; }));       
};

var testSingleOrNullWithMultipleElementAndWithPredicateThrowsError = function() {
  try { 
    new pn.seq.Seq([1, 2, 3]).singleOrNull(function(x) { return x > 1; });     
    assertFail('Multiple matched');
  } catch (ex) {};
};

    </script>    
  </body>
</html>
