<!doctype html>
<html>
  <head></head>
  <body>
    <script src="http://localhost/shared/closure-library/closure/goog/base.js"></script>
    <script src="../deps.js"></script>
    <script>
goog.require('goog.testing.jsunit');
goog.require('pn.seq.Seq');

var arr = [
  {key:0, value:1}, 
  {key:0, value:2},
  {key:0, value:3},
  {key:0, value:4},
  {key:1, value:5},
  {key:1, value:6},
  {key:1, value:7}];
  
var testReverse = function() {
  assertArrayEquals([3, 2, 1], pn.seq.Seq.create([1, 2, 3]).reverse());  
};

var testMultipleReversii = function() {
  var seq = pn.seq.Seq.create([1, 2, 3])
  assertArrayEquals([3, 2, 1], seq.reverse());  
  assertArrayEquals([3, 2, 1], seq.reverse());  
};

var testSumWithoutProjection = function() {
  assertEquals(6, pn.seq.Seq.create([1, 2, 3]).sum());  
};

var testMultipleSums = function() {
  var seq = pn.seq.Seq.create([1, 2, 3]);
  assertEquals(6, seq.sum());  
  assertEquals(6, seq.sum());  
};

var testSumWithProjection = function() {
  assertEquals(28, pn.seq.Seq.create(arr).sum(function(v) { return v.value; }));  
};

var testAvgWithoutProjection = function() {
  assertEquals(2, pn.seq.Seq.create([1, 2, 3]).average());  
};

var testAvgWithProjection = function() {
  assertEquals(4, pn.seq.Seq.create(arr).average(function(v) { return v.value; }));  
};

var testMultipleAvarages = function() {
  var seq = pn.seq.Seq.create(arr);
  assertEquals(4, seq.average(function(v) { return v.value; }));  
  assertEquals(4, seq.average(function(v) { return v.value; }));  
};
    </script>    
  </body>
</html>